{"version":3,"sources":["components/Heading.js","components/nav/LogButton.js","components/nav/NavButton.js","components/nav/NavButtonsDiv.js","components/nav/NavBar.js","components/songs/DeleteDialog.js","components/songs/SongMenu.js","components/songs/SongListItem.js","components/songs/SongList.js","components/songs/SongSection.js","components/songs/SongSectionList.js","components/DialogCloseButton.js","components/songs/UnsavedPrompt.js","components/songs/SaveDialog.js","components/songs/Song.js","components/app/AuthenticatedApp.js"],"names":["useStyles","makeStyles","header","marginTop","Heading","text","classes","component","variant","className","LogButton","loggedIn","dispatch","useDispatch","history","useHistory","Button","color","onClick","logout","showAlert","alerts","push","navButton","textDecoration","padding","NavButton","path","Link","to","root","flex","NavButtonsDiv","loggedOutButtons","flexGrow","title","fontSize","paddingRight","NavBar","AppBar","position","Toolbar","Typography","DeleteDialog","open","setOpen","handleConfirmClick","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","menu","SongMenu","song","useState","anchorTo","setAnchorTo","delConfirmOpen","setDelConfirmOpen","user","useSelector","state","auth","handleClose","IconButton","event","target","MoreVert","Menu","elevation","anchorEl","keepMounted","MenuItem","cloneSong","username","deleteSong","item","container","display","justifyContent","textAlign","marginBottom","SongListItem","Container","maxWidth","ListItem","id","divider","list","addSongButton","margin","SongList","songs","console","log","length","List","map","key","startIcon","Add","createSong","songHelper","getDefaultSong","then","res","catch","e","theme","section","borderWidth","borderStyle","borderRadius","borderColor","palette","primary","main","overflow","whiteSpace","backgroundColor","normalViewRoot","name","linesDiv","line","editForm","nameField","bottomDiv","lineSubmitButton","cloneButton","deleteButton","marginLeft","dragHandle","SongSection","songId","sectionId","editMode","deleteConfirm","setDeleteConfirm","DragHandle","SortableHandle","Box","Icon","DragIndicator","find","s","sections","nameError","errors","type","SECTION_NAME_ERROR","lineError","SECTION_LINES_ERROR","handleNameChange","value","editedSection","lines","createError","removeError","editSection","handleLinesChange","linesArray","linesStringToArray","validateLines","handleCloneClick","cloneSection","handleDeleteClick","preventDefault","deleteSection","TextField","error","undefined","label","defaultValue","onChange","helperText","multiline","rows","size","linesArrayToString","fullWidth","index","SortableItem","SortableElement","SortableList","SortableContainer","align","SongSectionList","handleSortEnd","oldIndex","newIndex","sortedSections","arrayMove","sortSections","onSortEnd","useDragHandle","useWindowAsScrollContainer","closeButton","right","spacing","top","grey","DialogCloseButton","Close","UnsavedPrompt","handleSaveConfirmClick","handleSaveDiscardClick","unsavedChanges","saveAllowed","saveButton","onConfirm","handlePromptSaveClick","disabledSaveButton","Tooltip","arrow","disabled","handlePromptDiscardClick","when","isActive","onCancel","navPrompt","SaveDialog","handleDiscardClick","menuContainer","editModeButton","titleField","addSectionButton","deleteSongButton","dialogCloseButton","Song","setEditMode","saveOpen","setSaveOpen","useParams","songErrors","titleError","SONG_TITLE_ERROR","snapshot","useEffect","resetSnapshot","handleSaveClick","saveSnapshot","saveSong","handleEditButtonClick","handleEditModeExitClick","handleEditModeEnterClick","getSongFromSnapshot","handleTitleChange","editTitle","handleAddSectionClick","addSection","_","isEmpty","isEqual","style","width","DeleteForever","mainContainer","alignItems","contentContainer","AuthenticatedApp","initializeSongs"],"mappings":"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","file":"static/js/5.2724eaf0.chunk.js","sourcesContent":["import React from 'react'\nimport { makeStyles, Typography } from '@material-ui/core'\n\nconst useStyles = makeStyles(() => ({\n  header: {\n    marginTop: 30\n  }\n}))\n\nconst Heading = ({ text }) => {\n  const classes = useStyles()\n  return (\n    <Typography component='h1' variant='h4' className={classes.header}>\n      {text}\n    </Typography>\n  )\n}\n\nexport default Heading","import React from 'react'\nimport { Button } from '@material-ui/core'\nimport { useDispatch } from 'react-redux'\nimport { logout } from '../../redux/authReducer'\nimport { useHistory } from 'react-router'\nimport PropTypes from 'prop-types'\nimport { showAlert, alerts } from '../../redux/alertReducer'\n\nconst LogButton = ({ loggedIn }) => {\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const handleLogClick = () => {\n    if (loggedIn) {\n      dispatch(logout())\n      dispatch(showAlert(alerts.logout))\n    }\n    history.push('/')\n  }\n\n  return (\n    <Button\n      color='inherit'\n      onClick={handleLogClick}\n    >\n      {loggedIn ? 'Log out' : 'Log in'}\n    </Button>\n  )\n}\n\nLogButton.propTypes = {\n  loggedIn: PropTypes.bool\n}\n\nexport default LogButton","import React from 'react'\nimport { Button, makeStyles } from '@material-ui/core'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nconst useStyles = makeStyles(() => ({\n  navButton: {\n    textDecoration: 'none',\n    color: 'white',\n    padding: 20\n  }\n}))\n\nconst NavButton = ({ path, text, onClick }) => {\n  const classes = useStyles()\n\n  return (\n    <Button\n      component={Link}\n      to={path}\n      onClick={onClick}\n      color='inherit'\n      className={classes.navButton}\n    >\n      {text}\n    </Button>\n  )\n}\n\nNavButton.propTypes = {\n  path: PropTypes.string,\n  text: PropTypes.string.isRequired,\n  onClick: PropTypes.func\n}\n\nexport default NavButton","import React from 'react'\nimport NavButton from './NavButton'\nimport { makeStyles } from '@material-ui/core'\nimport PropTypes from 'prop-types'\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flex: 1\n  }\n}))\n\nconst NavButtonsDiv = ({ loggedIn }) => {\n  const classes = useStyles()\n\n  const loggedInButtons = () => {\n    return <NavButton path='/songs/' text='Your songs' />\n  }\n\n  const loggedOutButtons = () => {\n\n  }\n\n  return (\n    <div className={classes.root}>\n      {loggedIn ? loggedInButtons() : loggedOutButtons()}\n    </div>\n  )\n}\n\nNavButtonsDiv.propTypes = {\n  loggedIn: PropTypes.bool\n}\n\nexport default NavButtonsDiv","import React from 'react'\nimport { AppBar, Toolbar, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport LogoutButton from './LogButton'\nimport NavButtonsDiv from './NavButtonsDiv'\nimport PropTypes from 'prop-types'\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flexGrow: 1\n  },\n  title: {\n    fontSize: 20,\n    paddingRight: 15\n  }\n}))\n\nconst NavBar = ({ loggedIn }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <AppBar position='static'>\n        <Toolbar>\n          <Typography className={classes.title}>\n            SongWriter\n          </Typography>\n          <NavButtonsDiv loggedIn={loggedIn} />\n          <LogoutButton loggedIn={loggedIn} />\n        </Toolbar>\n      </AppBar>\n    </div>\n\n  )\n}\n\nNavBar.propTypes = {\n  loggedIn: PropTypes.bool\n}\n\nexport default NavBar","import React from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core'\nimport PropTypes from 'prop-types'\n\nconst DeleteDialog = ({ open, setOpen, handleConfirmClick }) => {\n  return (\n    <Dialog\n      open={open}\n      onClose={() => setOpen(false)}\n    >\n      <DialogTitle>Delete this song?</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Once deleted, this song cannot be restored.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleConfirmClick} color='secondary' variant='contained'>\n          Delete permanently\n        </Button>\n        <Button onClick={() => setOpen(false)} variant='contained'>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nDeleteDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n  handleConfirmClick: PropTypes.func.isRequired\n}\n\nexport default DeleteDialog","import React, { useState } from 'react'\nimport { IconButton, Menu, MenuItem, makeStyles, Button } from '@material-ui/core'\nimport { MoreVert } from '@material-ui/icons'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { deleteSong, cloneSong } from '../../redux/songReducer'\nimport DeleteDialog from './DeleteDialog'\nimport PropTypes from 'prop-types'\n\nconst useStyles = makeStyles(() => ({\n  menu: {\n    '& .MuiPaper-root': {\n      //backgroundColor: '#e8e8e8ed'\n    }\n  }\n}))\n\nconst SongMenu = ({ song }) => {\n  const [anchorTo, setAnchorTo] = useState(null)\n  const [delConfirmOpen, setDelConfirmOpen] = useState(false)\n\n  const classes = useStyles()\n  const dispatch = useDispatch()\n  const user = useSelector((state) => state.auth.user)\n\n  const handleClick = (event) => {\n    setAnchorTo(event.target)\n  }\n\n  const handleClose = () => {\n    setAnchorTo(null)\n  }\n\n  const handleCloneClick = () => {\n    dispatch(cloneSong(song, user.username))\n    handleClose()\n  }\n\n  const handleDeleteClick = () => {\n    setDelConfirmOpen(true)\n    handleClose()\n  }\n\n  const handleDeleteConfirmClick = () => {\n    dispatch(deleteSong(song))\n  }\n\n  return (\n    <>\n      <IconButton\n        onClick={handleClick}\n      >\n        <MoreVert />\n      </IconButton>\n      <Menu\n        elevation={1}\n        anchorEl={anchorTo}\n        keepMounted\n        open={anchorTo !== null}\n        onClose={handleClose}\n        className={classes.menu}\n      >\n        <MenuItem>\n          <Button\n            variant='outlined'\n            color='primary'\n            onClick={handleCloneClick}\n          >\n            Clone\n          </Button>\n        </MenuItem>\n        <MenuItem>\n          <Button\n            variant='outlined'\n            color='secondary'\n            onClick={handleDeleteClick}\n          >\n            Delete\n          </Button>\n        </MenuItem>\n      </Menu>\n      <DeleteDialog\n        open={delConfirmOpen}\n        setOpen={setDelConfirmOpen}\n        handleConfirmClick={handleDeleteConfirmClick}\n      />\n    </>\n  )\n}\n\nSongMenu.propTypes = {\n  song: PropTypes.object.isRequired\n}\n\nexport default SongMenu","import React from 'react'\nimport { ListItem, makeStyles, Typography, Container } from '@material-ui/core'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport SongMenu from './SongMenu'\n\nconst useStyles = makeStyles(() => ({\n  item: {\n\n  },\n  container: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  title: {\n    textAlign: 'left',\n    marginTop: 8,\n    marginBottom: 8\n  },\n  menu: {\n\n  }\n}))\n\nconst SongListItem = ({ song }) => {\n  const classes = useStyles()\n\n  return (\n    <Container maxWidth='xl' className={classes.container}>\n      <ListItem\n        component={Link}\n        to={`/songs/${song.id}`}\n        divider={true}\n        className={classes.item}\n      >\n        \n        <Typography variant='h6' className={classes.title}>\n          {song.title}\n        </Typography>\n      </ListItem>\n      <SongMenu song={song} className={classes.menu} />\n    </Container>\n  )\n}\n\nSongListItem.propTypes = {\n  song: PropTypes.object.isRequired\n}\n\nexport default SongListItem","import React from 'react'\nimport { List, makeStyles, Button } from '@material-ui/core'\nimport SongListItem from './SongListItem'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Add } from '@material-ui/icons'\nimport songHelper from '../../helpers/songHelper'\nimport { createSong } from '../../redux/songReducer'\nimport { useHistory } from 'react-router'\nimport Heading from '../Heading'\n\nconst useStyles = makeStyles(() => ({\n  list: {\n    marginTop: 10\n  },\n  addSongButton: {\n    margin: 8\n  }\n}))\n\nconst SongList = () => {\n  const classes = useStyles()\n  const songs = useSelector((state) => state.songs)\n  const user = useSelector((state) => state.auth.user)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  console.log('Rendered', songs.length, 'songs')\n\n  const handleNewSongClick = () => {\n    dispatch(createSong(songHelper.getDefaultSong(user))) // Note: not error handling createSong\n      .then(res => {\n        history.push('/songs/' + res.id)\n        console.log('Redirected!')\n      })\n      .catch(e => console.log('Error creating new song:', e))\n  }\n\n  const listSongs = () => songs.map(song =>\n    <SongListItem\n      key={song.id}\n      to={`/songs/${song.id}`}\n      song={song}\n    />\n  )\n\n  return (\n    <div>\n      <Heading text='Your songs' />\n      <List className={classes.list}>\n        {songs.length !== 0 ? listSongs() : <p>No songs found</p>}\n      </List>\n      <Button\n        className={classes.addSongButton}\n        variant='contained'\n        color='primary'\n        startIcon={<Add />}\n        onClick={handleNewSongClick}\n      >\n        New song\n      </Button>\n    </div>\n  )\n}\n\nexport default SongList","import React, { useState } from 'react'\nimport { makeStyles, TextField, Button, Icon, Box, Typography } from '@material-ui/core'\nimport PropTypes from 'prop-types'\nimport songHelper from '../../helpers/songHelper'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { editSection, deleteSection, cloneSection } from '../../redux/songReducer'\n\nimport { SortableHandle } from 'react-sortable-hoc'\nimport { DragIndicator } from '@material-ui/icons'\nimport { errors, createError, removeError } from '../../redux/errorReducer'\n\nconst useStyles = makeStyles((theme) => ({\n  section: {\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    borderColor: theme.palette.primary.main,\n    padding: 20,\n    marginBottom: 3,\n    overflow: 'auto',\n    whiteSpace: 'nowrap',\n    backgroundColor: '#fff'\n  },\n  normalViewRoot: {\n    marginTop: -12,\n    marginBottom: -15\n  },\n  name: {\n    marginTop: 10\n  },\n  linesDiv: {\n    marginTop: 12,\n    marginBottom: 10\n  },\n  line: {\n    marginBottom: 5\n  },\n  editForm: {\n    marginBottom: 15\n  },\n  nameField: {\n    marginBottom: 10\n  },\n  bottomDiv: {\n    display: 'flex'\n  },\n  lineSubmitButton: {\n    marginTop: 10,\n    marginBottom: -25\n  },\n  cloneButton: {\n    marginTop: 10,\n    marginBottom: -25,\n  },\n  deleteButton: {\n    marginTop: 10,\n    marginBottom: -25,\n    marginLeft: 'auto'\n  },\n  dragHandle: {\n    marginLeft: 'auto',\n    marginTop: 10,\n    marginBottom: -25,\n  }\n}))\n\nconst SongSection = ({ songId, sectionId, editMode }) => {\n  const [deleteConfirm, setDeleteConfirm] = useState(false)\n\n  const classes = useStyles()\n  const dispatch = useDispatch()\n\n  const DragHandle = SortableHandle(() => <Box className={classes.dragHandle}> <Icon><DragIndicator /></Icon> </Box>)\n\n  const section = useSelector((state) => state.songs.find(s => s.id === songId).sections.find(s => s.id === sectionId))\n  const nameError = useSelector((state) => state.errors.find(e => e.type === errors.SECTION_NAME_ERROR && e.id === sectionId))\n  const lineError = useSelector((state) => state.errors.find(e => e.type === errors.SECTION_LINES_ERROR && e.id === sectionId))\n\n  const editView = () => {\n    return (\n      <form className={classes.editForm} >\n        <TextField\n          className={classes.nameField}\n          error={nameError !== undefined}\n          label='Edit name'\n          name='name'\n          defaultValue={section.name}\n          onChange={handleNameChange}\n          helperText={nameError ? 'Length must be 1-50 characters' : ''}\n        />\n        <div>\n          <TextField\n            multiline\n            error={lineError !== undefined}\n            label='Lines'\n            name='lines'\n            rows={section.lines.size}\n            defaultValue={songHelper.linesArrayToString(section.lines)}\n            onChange={handleLinesChange}\n            fullWidth={true}\n            helperText={lineError ? 'Max 200 characters for one line' : ''}\n          />\n        </div>\n        <div className={classes.bottomDiv}>\n          <Button\n            className={classes.cloneButton}\n            size='small'\n            color='primary'\n            variant='outlined'\n            onClick={handleCloneClick}\n          >\n            Clone\n          </Button>\n          <DragHandle />\n          <Button\n            className={classes.deleteButton}\n            size='small'\n            color='secondary'\n            variant='outlined'\n            onClick={handleDeleteClick}\n          >\n            {deleteConfirm ? 'Confirm deletion' : 'Delete'}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  const normalView = () => {\n    return (\n      <div className={classes.normalViewRoot}>\n        <Typography variant='h6' className={classes.name}>\n          {section.name}\n        </Typography>\n        <div className={classes.linesDiv}>\n          {section.lines.map((line, index) => {\n            return (\n              <div key={index}>\n                <Typography variant='body1' className={classes.line}>{line}</Typography>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n\n  const handleNameChange = (event) => {\n    const name = event.target.value\n    const editedSection = { ...section, lines: [...section.lines], name }\n    if (name.length === 0 || name.length > 50) {\n      dispatch(createError(errors.SECTION_NAME_ERROR, sectionId))\n    } else {\n      dispatch(removeError(errors.SECTION_NAME_ERROR, sectionId))\n    }\n    dispatch(editSection(songId, editedSection))\n  }\n\n  const handleLinesChange = (event) => {\n    const linesArray = songHelper.linesStringToArray(event.target.value)\n    const editedSection = { ...section, lines: linesArray }\n    if (!songHelper.validateLines(linesArray)) {\n      dispatch(createError(errors.SECTION_LINES_ERROR, sectionId))\n    } else {\n      dispatch(removeError(errors.SECTION_LINES_ERROR, sectionId))\n    }\n    dispatch(editSection(songId, editedSection))\n  }\n\n  const handleCloneClick = () => {\n    console.log('Cloning', section)\n    dispatch(cloneSection(songId, section))\n  }\n\n  const handleDeleteClick = (event) => {\n    event.preventDefault()\n    console.log('Delete button pressed!')\n    if (deleteConfirm) {\n      console.log('Delete for realz')\n      dispatch(deleteSection(songId, section))\n    } else {\n      setDeleteConfirm(true)\n    }\n  }\n\n  return (\n    <div className={classes.section}>\n      {editMode ? editView() : normalView()}\n    </div>\n  )\n}\n\nSongSection.propTypes = {\n  songId: PropTypes.string.isRequired,\n  sectionId: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired\n}\n\nexport default SongSection","import React from 'react'\nimport { Container } from '@material-ui/core'\nimport SongSection from './SongSection'\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc'\nimport arrayMove from 'array-move'\nimport { useDispatch } from 'react-redux'\nimport { sortSections } from '../../redux/songReducer'\n\nconst SortableItem = SortableElement(({ section, song, editMode }) => {\n  return (\n    <SongSection\n      songId={song.id}\n      sectionId={section.id}\n      editMode={editMode}\n    >\n    </SongSection>\n  )\n})\n\nconst SortableList = SortableContainer(({ song, editMode }) => {\n  return (\n    <Container maxWidth={false} align='left'>\n      {song.sections.map((section, index) => {\n        return (\n          <SortableItem\n            key={section.id}\n            index={index}\n            section={section}\n            song={song}\n            editMode={editMode}\n          />\n        )\n      })}\n    </Container>\n  )\n})\n\nconst SongSectionList = ({ song, editMode }) => {\n\n  const dispatch = useDispatch()\n\n  const handleSortEnd = ({ oldIndex, newIndex }) => {\n    const sortedSections = arrayMove(song.sections, oldIndex, newIndex)\n    dispatch(sortSections(song, sortedSections))\n  }\n\n  const renderSections = () => {\n    if (song.sections.length === 0) {\n      return (\n        <Container>\n          <h2>No sections</h2>\n        </Container>\n      )\n    }\n    return (\n      <SortableList\n        song={song}\n        editMode={editMode}\n        onSortEnd={handleSortEnd}\n        useDragHandle\n        useWindowAsScrollContainer\n      />\n    )\n  }\n\n  return (\n    renderSections()\n  )\n}\n\nexport default SongSectionList","import React from 'react'\nimport { makeStyles, IconButton } from '@material-ui/core'\nimport { Close } from '@material-ui/icons'\nimport PropTypes from 'prop-types'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  }\n}))\n\nconst DialogCloseButton = ({ onClick }) => {\n  const classes = useStyles()\n\n  return (\n    <IconButton className={classes.closeButton} onClick={onClick}>\n      <Close />\n    </IconButton>\n  )\n}\n\nDialogCloseButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n}\n\nexport default DialogCloseButton","import React from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button, Tooltip } from '@material-ui/core'\nimport NavigationPrompt from 'react-router-navigation-prompt'\nimport PropTypes from 'prop-types'\nimport DialogCloseButton from '../DialogCloseButton'\n\nconst UnsavedPrompt = ({ handleSaveConfirmClick, handleSaveDiscardClick, unsavedChanges, saveAllowed = true }) => {\n\n  const navPrompt = (isActive, onCancel, onConfirm) => {\n    return (\n      <Dialog\n        open={isActive}\n        onClose={onCancel}\n      >\n        <DialogTitle>You have unsaved changes</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            If you leave without saving, all changes will be lost!\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          {saveAllowed ? saveButton(onConfirm) : disabledSaveButton(onConfirm)}\n          <Button onClick={handlePromptDiscardClick(onConfirm)} color='secondary' variant='contained'>\n            Leave without saving\n          </Button>\n          <DialogCloseButton onClick={onCancel} />\n        </DialogActions>\n      </Dialog>\n    )\n  }\n\n  const saveButton = (onConfirm) => {\n    return (\n      <Button onClick={handlePromptSaveClick(onConfirm)} color='primary' variant='contained'>\n        Save and leave\n      </Button>\n    )\n  }\n\n  const disabledSaveButton = (onConfirm) => {\n    return (\n      <Tooltip title='Resolve errors before saving' arrow>\n        <span> {/* !! Extra wrapper required for Safari !! */}\n          <Button onClick={handlePromptSaveClick(onConfirm)} color='primary' variant='contained' disabled>\n            Can&apos;t save\n          </Button>\n        </span>\n      </Tooltip>\n    )\n  }\n\n  const handlePromptSaveClick = (onConfirm) => () => {\n    handleSaveConfirmClick()\n    onConfirm()\n  }\n\n  const handlePromptDiscardClick = (onConfirm) => () => {\n    handleSaveDiscardClick()\n    onConfirm()\n  }\n\n  return (\n    <NavigationPrompt when={unsavedChanges()}>\n      {({ isActive, onCancel, onConfirm }) => navPrompt(isActive, onCancel, onConfirm) }\n    </NavigationPrompt>\n  )\n}\n\nUnsavedPrompt.propTypes = {\n  handleSaveConfirmClick: PropTypes.func.isRequired,\n  handleSaveDiscardClick: PropTypes.func.isRequired,\n  unsavedChanges: PropTypes.func.isRequired,\n  saveAllowed: PropTypes.bool\n}\n\nexport default UnsavedPrompt","import React from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button, Tooltip } from '@material-ui/core'\nimport DialogCloseButton from '../DialogCloseButton'\nimport PropTypes from 'prop-types'\n\nconst SaveDialog = ({ open, setOpen, handleConfirmClick, handleDiscardClick, saveAllowed = true }) => {\n\n  const saveButton = () => {\n    return (\n      <Button onClick={handleConfirmClick} color='primary' variant='contained' >\n        Save changes\n      </Button>\n    )\n  }\n\n  const disabledSaveButton = () => {\n    return (\n      <Tooltip title='Resolve errors before saving' arrow>\n        <span> {/* !! Extra wrapper required for Safari !! */}\n          <Button onClick={handleConfirmClick} color='primary' variant='contained' disabled >\n          Can&apos;t save\n          </Button>\n        </span>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={() => setOpen(false)}\n    >\n      <DialogTitle>Save changes?</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Save or discard the changes you have made.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        {saveAllowed ? saveButton() : disabledSaveButton()}\n        <Button onClick={handleDiscardClick} color='secondary' variant='contained'>\n          Discard changes\n        </Button>\n        <DialogCloseButton onClick={() => setOpen(false)} />\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nSaveDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n  handleConfirmClick: PropTypes.func.isRequired,\n  handleDiscardClick: PropTypes.func.isRequired,\n  saveAllowed: PropTypes.bool\n}\n\nexport default SaveDialog","import React, { useState, useEffect } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\nimport { makeStyles, Container, Button, TextField } from '@material-ui/core'\nimport { Add, DeleteForever } from '@material-ui/icons'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { editTitle, addSection, deleteSong, saveSong, getSongFromSnapshot } from '../../redux/songReducer'\nimport { saveSnapshot, resetSnapshot } from '../../redux/snapshotReducer'\nimport SongSectionList from './SongSectionList'\nimport _ from 'lodash'\nimport UnsavedPrompt from './UnsavedPrompt'\nimport DeleteDialog from './DeleteDialog'\nimport SaveDialog from './SaveDialog'\nimport Heading from '../Heading'\nimport { errors, createError, removeError } from '../../redux/errorReducer'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n\n  },\n  menuContainer: {\n    marginBottom: theme.spacing(1)\n  },\n  editModeButton: {\n    marginLeft: theme.spacing(1)\n  },\n  titleField: {\n    margin: 12\n  },\n  addSectionButton: {\n    marginTop: theme.spacing(1)\n  },\n  deleteSongButton: {\n    marginLeft: 'auto'\n  },\n  dialogCloseButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  }\n}))\n\nconst Song = () => {\n  const [editMode, setEditMode] = useState(false)\n  const [delConfirmOpen, setDelConfirmOpen] = useState(false)\n  const [saveOpen, setSaveOpen] = useState(false)\n\n  const classes = useStyles()\n  const id = useParams().id\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const song = useSelector((state) => state.songs.find(s => s.id === id))\n  const songErrors = useSelector((state) => state.errors)\n  console.log('Errors:', songErrors)\n  const titleError = songErrors.find(e => e.type === errors.SONG_TITLE_ERROR)\n\n  const snapshot = useSelector((state) => state.snapshot)\n\n  useEffect(() => {\n    dispatch(resetSnapshot())\n  }, [dispatch])\n\n  console.log('Song render:', song)\n\n  const calculateTitleWidth = () => {\n    return 5 + (song.title.length / 2.5)\n  }\n\n  const title = () => {\n    if (editMode) {\n      return (\n        <div style={{ width: `${calculateTitleWidth()}%` }}>\n          <TextField\n            fullWidth\n            error={titleError !== undefined}\n            className={classes.titleField}\n            label='Edit title'\n            defaultValue={song.title}\n            onChange={handleTitleChange}\n            helperText={titleError ? 'Length must be 1-50 characters' : ''}\n          />\n        </div>\n      )\n    } else {\n      return (\n        <Heading text={song.title}/>\n      )\n    }\n  }\n\n  const saveButton = () => {\n    if (unsavedChanges()) {\n      return (\n        <Button\n          color='primary'\n          variant='outlined'\n          onClick={handleSaveClick}\n          disabled={songErrors.length !== 0}\n        >\n          Save changes\n        </Button>\n      )\n    }\n  }\n\n  const editModeButton = () => {\n    return (\n      <Button\n        color='primary'\n        variant='contained'\n        onClick={handleEditButtonClick}\n        className={classes.editModeButton}\n      >\n        {editMode ? 'Exit edit mode' : 'Edit mode'}\n      </Button>\n    )\n  }\n\n  const addSectionButton = () => {\n    if (editMode) {\n      return (\n        <Button\n          className={classes.addSectionButton}\n          variant='contained'\n          color='primary'\n          startIcon={<Add />}\n          onClick={handleAddSectionClick}\n        >\n          New section\n        </Button>\n      )\n    }\n    return (<div/>)\n  }\n\n  const deleteSongButton = () => {\n    if (editMode) {\n      return (\n        <Button\n          className={classes.deleteSongButton}\n          variant='contained'\n          color='secondary'\n          startIcon={<DeleteForever />}\n          onClick={() => setDelConfirmOpen(true)}\n        >\n          Delete song\n        </Button>\n      )\n    }\n    return (<div/>)\n  }\n\n  const handleSaveClick = () => {\n    dispatch(saveSnapshot(song))\n    dispatch(saveSong(song))\n  }\n\n  const handleEditButtonClick = () => {\n    if (editMode) {\n      handleEditModeExitClick()\n    } else {\n      handleEditModeEnterClick()\n    }\n  }\n\n  const handleEditModeEnterClick = () => {\n    dispatch(saveSnapshot(song))\n    setEditMode(true)\n  }\n\n  const handleEditModeExitClick = () => {\n    console.log('Exiting edit mode')\n    if (unsavedChanges()) {\n      setSaveOpen(true)\n    } else {\n      setEditMode(false)\n      dispatch(resetSnapshot())\n    }\n  }\n\n  const handleSaveConfirmClick = () => {\n    console.log('Saving!')\n    setSaveOpen(false)\n    setEditMode(false)\n    dispatch(resetSnapshot())\n    dispatch(saveSong(song))\n  }\n\n  const handleSaveDiscardClick = () => {\n    console.log('Discarding changes!')\n    setSaveOpen(false)\n    setEditMode(false)\n    dispatch(getSongFromSnapshot(snapshot))\n    dispatch(resetSnapshot())\n  }\n\n  const handleTitleChange = (event) => {\n    if (event.target.value === '' || event.target.value.length > 50) {\n      console.log('Dispatching error')\n      dispatch(createError(errors.SONG_TITLE_ERROR))\n    } else if (titleError) {\n      console.log('Removing errors')\n      dispatch(removeError(errors.SONG_TITLE_ERROR))\n    }\n    dispatch(editTitle(song, event.target.value))\n  }\n\n  const handleAddSectionClick = () => {\n    console.log('Add new section!')\n    dispatch(addSection(song))\n  }\n\n  const handleDeleteConfirmClick = () => {\n    console.log('Deleting song here')\n    dispatch(deleteSong(song))\n    dispatch(resetSnapshot())\n    history.push('/songs/')\n  }\n\n  const unsavedChanges = () => {\n    return !_.isEmpty(snapshot) && !_.isEqual(snapshot, song)\n  }\n\n  if (song) {\n    return (\n      <div className={classes.root}>\n        {title()}\n        <div>\n          <Container align='right' maxWidth={false} className={classes.menuContainer}>\n            {saveButton()}\n            {editModeButton()}\n          </Container>\n          <SongSectionList song={song} editMode={editMode} />\n        </div>\n        <Container maxWidth={false}>\n          {addSectionButton()}\n        </Container>\n        <Container align='right' maxWidth={false}>\n          {deleteSongButton()}\n        </Container>\n        <DeleteDialog\n          open={delConfirmOpen}\n          setOpen={setDelConfirmOpen}\n          handleConfirmClick={handleDeleteConfirmClick}\n        />\n        <SaveDialog\n          open={saveOpen}\n          setOpen={setSaveOpen}\n          handleConfirmClick={handleSaveConfirmClick}\n          handleDiscardClick={handleSaveDiscardClick}\n          saveAllowed={songErrors.length === 0}\n        />\n        <UnsavedPrompt\n          handleSaveConfirmClick={handleSaveConfirmClick}\n          handleSaveDiscardClick={handleSaveDiscardClick}\n          unsavedChanges={unsavedChanges}\n          saveAllowed={songErrors.length === 0}\n        />\n      </div>\n    )\n  } else {\n    return (\n      <div>\n        <Heading text='Loading song' />\n        <p>Check the url if it takes too long</p>\n      </div>\n    )\n  }\n}\n\nexport default Song","import React, { useEffect } from 'react'\nimport NavBar from '../nav/NavBar'\nimport { makeStyles, Container } from '@material-ui/core'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport SongList from '../songs/SongList'\nimport Song from '../songs/Song'\nimport { initializeSongs } from '../../redux/songReducer'\nimport { useDispatch, useSelector } from 'react-redux'\n\nconst useStyles = makeStyles(() => ({\n  mainContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  contentContainer: {\n\n  }\n}))\n\nconst AuthenticatedApp = () => {\n  console.log('App rendering')\n  //const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n  const dispatch = useDispatch()\n\n  const user = useSelector((state) => state.auth.user)\n\n  useEffect(() => {\n    console.log('App effect')\n    dispatch(initializeSongs(user))\n  }, [dispatch, user])\n\n  return (\n    <>\n      <Router>\n        <NavBar loggedIn />\n        <Container maxWidth={false} className={classes.mainContainer}>\n          <Container maxWidth={false} align='center' className={classes.contentContainer}>\n            <Switch>\n              <Route path='/songs/:id'>\n                <Song />\n              </Route>\n              <Route path='/songs/'>\n                <SongList />\n              </Route>\n              <Route path='/'><p>Welcome</p></Route>\n            </Switch>\n          </Container>\n        </Container>\n      </Router>\n    </>\n  )\n}\n\nexport default AuthenticatedApp\n"],"sourceRoot":""}